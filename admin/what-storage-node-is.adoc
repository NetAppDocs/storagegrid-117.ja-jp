---
permalink: admin/what-storage-node-is.html 
sidebar: sidebar 
keywords: what is a storage node, how many storage nodes 
summary: ストレージノードは、オブジェクトデータとメタデータを管理および格納します。各 StorageGRID システムには、少なくとも 3 つのストレージノードが必要です。サイトが複数ある場合は、 StorageGRID システム内の各サイトにも 3 つのストレージノードが必要です。 
---
= ストレージノードとは
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ストレージノードは、オブジェクトデータとメタデータを管理および格納します。各 StorageGRID システムには、少なくとも 3 つのストレージノードが必要です。サイトが複数ある場合は、 StorageGRID システム内の各サイトにも 3 つのストレージノードが必要です。

ストレージノードには、ディスク上のオブジェクトデータとメタデータを格納、移動、検証し、読み出すために必要なサービスとプロセスを提供します。ストレージノードに関する詳細情報は、 * nodes * ページで確認できます。



== ADC サービスとは何ですか？

Administrative Domain Controller （ ADC ）サービスは、グリッドノードとその相互接続を認証します。ADC サービスは、サイトにある最初の 3 つのストレージノード上でホストされます。

ADC サービスは、サービスの場所や可用性などのトポロジ情報を管理します。あるグリッドノードが別のグリッドノードからの情報を必要とする場合や、別のグリッドノードによる処理を必要とする場合、そのグリッドノードは ADC サービスにアクセスして要求に最適なグリッドノードを見つけます。また、 ADC サービスは StorageGRID 環境の設定バンドルのコピーを保持するため、すべてのグリッドノードは現在の設定情報を取得できます。ストレージノードの ADC 情報は、グリッドトポロジのページ（ * support * > * Grid topology * ）で表示できます。

分散された処理および孤立した処理に対応するため、各 ADC サービスは、証明書、設定バンドル、およびサービスやトポロジに関する情報を、 StorageGRID システム内の他の ADC サービスと同期します。

一般に、すべてのグリッドノードは少なくとも 1 つの ADC サービスへの接続を維持し、これにより、グリッドノードは常に最新情報にアクセスします。ADC サービスに接続したグリッドノードは他のグリッドノードの証明書をキャッシュするため、ある ADC サービスが利用できない場合でも既知のグリッドノードを使用して引き続き機能できます。新しいグリッドノードが接続を確立するためには、 ADC サービスを使用する必要があります。

ADC サービスは接続された各グリッドノードからトポロジ情報を収集します。このグリッドノード情報には、 CPU 負荷、使用可能なディスクスペース（ストレージがある場合）、サポートされているサービス、およびグリッドノードのサイト ID が含まれます。その他のサービスは、トポロジクエリを介して ADC サービスにトポロジ情報を要求します。ADC サービスは、 StorageGRID システムから受信した最新情報で各クエリに応答します。



== DDS サービスとは何ですか

Distributed Data Store （ DDS ）サービスはストレージノードによってホストされ、 Cassandra データベースとのインターフェイスを提供して、 StorageGRID システムに格納されているオブジェクトメタデータに対してバックグラウンドタスクを実行します。



=== オブジェクト数

DDS サービスは、 StorageGRID システムに取り込まれたオブジェクトの合計数と、システムでサポートされている各インターフェイス（ S3 または Swift ）を使用して取り込まれたオブジェクトの合計数を追跡します。

すべてのストレージノードについて、ノードページのオブジェクトタブでオブジェクトの総数を確認できます。

image::../media/dds_object_counts_queries.png[DDS の概要ページ]



=== クエリ

特定の DDS サービスを使用したメタデータストアに対するクエリの平均実行時間、成功したクエリの合計数、およびタイムアウト問題 が原因で失敗したクエリの合計数を特定できます。

クエリ情報を確認して、メタデータストアである Cassandra の健常性を監視できます。これは、システムの取り込みと読み出しのパフォーマンスに影響します。たとえば、平均的なクエリのレイテンシが遅く、タイムアウトが原因で失敗したクエリの数が多い場合は、メタデータストアの負荷が高いか、または別の処理を実行中である可能性があります。

整合性の問題が原因で失敗したクエリの合計数を確認することもできます。整合性レベルの問題は、特定の DDS サービスを使用してクエリを実行した際に使用可能なメタデータストアの数が不足しているために発生します。

[Diagnostics]ページを使用して、グリッドの現在の状態に関する追加情報 を取得できます。を参照してください link:../monitor/running-diagnostics.html["診断を実行します"]。



=== 整合性の保証と制御

StorageGRID は、新しく作成されたオブジェクトのリードアフターライト整合性を保証します。正常に完了した PUT 処理に続く GET 処理では、新しく書き込まれたデータを読み取ることができます。既存のオブジェクトの上書き、メタデータの更新、および削除の整合性レベルは、結果整合性です。



== LDR サービスとは何ですか。

Local Distribution Router （ LDR ）サービスは各ストレージノードによってホストされ、 StorageGRID システムのコンテンツ転送を処理します。コンテンツ転送には、データストレージ、ルーティング、要求処理など、多数のタスクが含まれます。LDRサービスは、データ転送の負荷とデータトラフィック機能を処理することで、StorageGRID システムのハードワークのほとんどを実行します。

LDR サービスは次のタスクを処理します。

* クエリ
* 情報ライフサイクル管理（ ILM ）のアクティビティ
* オブジェクトの削除
* オブジェクトデータのストレージ
* 別の LDR サービス（ストレージノード）からのオブジェクトデータの転送
* データストレージ管理
* プロトコルインターフェイス（ S3 および Swift ）


また、 LDR サービスは、 StorageGRID システムが取り込まれた各オブジェクトに割り当てる一意な「コンテンツハンドル」（ UUID ）と S3 および Swift オブジェクトのマッピングを管理します。



=== クエリ

LDR クエリには、読み出しおよびアーカイブ処理におけるオブジェクトの場所のクエリが含まれます。クエリの平均実行時間、成功したクエリの合計数、およびタイムアウト問題 が原因で失敗したクエリの合計数を特定できます。

クエリ情報を確認して、メタデータストアの健常性を監視できます。メタデータストアの健常性は、システムの取り込みと読み出しのパフォーマンスに影響します。たとえば、平均的なクエリのレイテンシが遅く、タイムアウトが原因で失敗したクエリの数が多い場合は、メタデータストアの負荷が高いか、または別の処理を実行中である可能性があります。

整合性の問題が原因で失敗したクエリの合計数を確認することもできます。整合性レベルの問題は、特定の LDR サービスを使用してクエリを実行した際に使用可能なメタデータストアの数が不足しているために発生します。

[Diagnostics]ページを使用して、グリッドの現在の状態に関する追加情報 を取得できます。を参照してください link:../monitor/running-diagnostics.html["診断を実行します"]。



=== ILM アクティビティ

情報ライフサイクル管理（ ILM ）指標を使用すると、 ILM 実装に対してオブジェクトが評価される速度を監視できます。これらの指標は、ダッシュボードまたは* nodes *>*_ Storage Node_*>* ILM *で確認できます。



=== オブジェクトストア

LDR サービスの基盤となるデータストレージは、一定数のオブジェクトストア（ストレージボリュームとも呼ばれます）に分割されます。各オブジェクトストアは個別のマウントポイントです。

ストレージノードのオブジェクトストアは、ノードページ > ストレージタブで確認できます。

image::../media/object_stores.png[オブジェクトストア]

ストレージノード内のオブジェクトストアは、ボリューム ID と呼ばれる 0000 ~ 002F の 16 進数で識別されます。最初のオブジェクトストア（ボリューム 0 ）では、 Cassandra データベースのオブジェクトメタデータ用にスペースがリザーブされます。このボリュームの残りのスペースはオブジェクトデータに使用されます。他のすべてのオブジェクトストアはオブジェクトデータ専用です。オブジェクトデータにはレプリケートコピーとイレイジャーコーディングフラグメントがあります。

レプリケートコピーのスペース使用量を均等にするために、特定のオブジェクトのオブジェクトデータは、使用可能なストレージスペースに基づいて 1 つのオブジェクトストアに格納されます。1 つ以上のオブジェクトストアの容量を使い果たした場合は、ストレージノード上の容量がなくなるまで、残りのオブジェクトストアが引き続きオブジェクトを格納します。



=== メタデータの保護

オブジェクトメタデータは、オブジェクトの変更時刻や格納場所など、オブジェクトに関連する情報またはオブジェクトの概要 です。StorageGRID は Cassandra データベースにオブジェクトメタデータを格納します。 Cassandra データベースは LDR サービスと連携します。

冗長性を確保してオブジェクトメタデータを損失から保護するために、各サイトでオブジェクトメタデータのコピーが 3 つ保持されます。このレプリケーションは設定できず、自動的に実行されます。

link:managing-object-metadata-storage.html["オブジェクトメタデータストレージを管理する"]
