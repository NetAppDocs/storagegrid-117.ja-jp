---
permalink: primer/storagegrid-architecture-and-network-topology.html 
sidebar: sidebar 
keywords: architecture, deployment, topology, site, node redundancy, services, nodes 
summary: StorageGRID システムは、 1 つ以上のデータセンターサイトにある複数のタイプのグリッドノードで構成されます。 
---
= StorageGRID のアーキテクチャとネットワークトポロジ
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
StorageGRID システムは、 1 つ以上のデータセンターサイトにある複数のタイプのグリッドノードで構成されます。

追加情報 の StorageGRID ネットワークトポロジ、要件、およびグリッド通信については、を参照してください link:../network/index.html["ネットワークのガイドライン"]。



== 導入トポロジ

StorageGRID システムは、単一のデータセンターサイトにも複数のデータセンターサイトにも導入できます。



=== 単一サイト

単一サイトに導入する場合は、 StorageGRID システムのインフラと運用が一元化されます。

image::../media/data_center_site_single.png[単一のデータセンターサイト]



=== 複数のサイト

複数サイトに導入する場合は、サイトごとに異なるタイプと数の StorageGRID リソースをインストールできます。たとえば、あるデータセンターが別のデータセンターよりも多くのストレージを必要とする場合があります。

地震の断層線や洪水時の氾濫原など、さまざまなサイトが異なる障害領域の地理的に異なる場所に配置されることがよくあります。データ共有とディザスタリカバリは、他のサイトに自動的にデータを分散することで実現されます。

image::../media/data_center_sites_multiple.png[複数のデータセンターサイト]

単一のデータセンター内に複数の論理サイトを配置して、分散レプリケーションとイレイジャーコーディングによって可用性と耐障害性を向上させることもできます。



=== グリッドノードの冗長性

単一サイト環境またはマルチサイト環境では、冗長性を確保するために複数の管理ノードまたはゲートウェイノードを含めることができます。たとえば、 1 つのサイトまたは複数のサイトに複数の管理ノードをインストールできます。ただし、各 StorageGRID システムで使用できるプライマリ管理ノードは 1 つだけです。



== システムアーキテクチャ

次の図は、 StorageGRID システムにおけるグリッドノードの配置を示しています。

image::../media/grid_nodes_and_components.png[説明が付随している図]

S3 および Swift クライアントは、 StorageGRID でオブジェクトの格納と読み出しを行います。他のクライアントは、 E メール通知の送信と StorageGRID 管理インターフェイスへのアクセスに使用されるほか、必要に応じて監査共有へのアクセスに使用されます。

S3 および Swift クライアントは、ゲートウェイノードまたは管理ノードに接続して、ストレージノードへのロードバランシングインターフェイスを使用できます。または、 S3 / Swift クライアントは HTTPS を使用してストレージノードに直接接続できます。

オブジェクトは、ソフトウェアベースまたはハードウェアベースのストレージノード上のStorageGRID 内、または外部のS3バケットまたはAzure BLOBストレージコンテナで構成されるクラウドストレージプール内に格納できます。



== グリッドノードおよびサービス

StorageGRID システムの基本的なビルディングブロックはグリッドノードです。ノードはサービスを備えています。サービスは、グリッドノードに一連の機能を提供するソフトウェアモジュールです。

StorageGRID システムは、次の 4 種類のグリッドノードを使用します。

* * 管理ノード * は、システムの設定、監視、ロギングなどの管理サービスを提供します。Grid Manager にサインインすると、管理ノードに接続されます。各グリッドにはプライマリ管理ノードが 1 つ必要であり、冗長性を確保するために非プライマリ管理ノードを追加で配置できます。どの管理ノードにも接続が可能で、各管理ノードに表示される StorageGRID システムのビューもほぼ同じです。ただし、メンテナンス手順はプライマリ管理ノードを使用して実行する必要があります。
+
管理ノードを使用して、 S3 および Swift クライアントトラフィックの負荷を分散することもできます。

* * ストレージノード * ：オブジェクトデータとメタデータを管理、格納します。各 StorageGRID システムには、少なくとも 3 つのストレージノードが必要です。サイトが複数ある場合は、 StorageGRID システム内の各サイトにも 3 つのストレージノードが必要です。
* * ゲートウェイノード（オプション） * クライアントアプリケーションが StorageGRID への接続に使用できるロードバランシングインターフェイスを提供します。ロードバランサによってクライアントが最適なストレージノードにシームレスに転送されるため、ノードやサイト全体の障害が透過的に処理されます。ゲートウェイノードと管理ノードを組み合わせてロードバランシングを行うことも、サードパーティ製の HTTP ロードバランサを実装することもできます。
* *アーカイブノード（廃止）*オプションのインターフェイスで、オブジェクトデータをテープにアーカイブできます。


詳細については、を参照してください link:../admin/index.html["StorageGRID の管理"]。



=== ソフトウェアベースのノード

ソフトウェアベースのグリッドノードは、次の方法で導入できます。

* VMware vSphere で仮想マシン（ VM ）として導入
* Linux ホストのコンテナエンジン内。次のオペレーティングシステムがサポートされています。
+
** Red Hat Enterprise Linux の場合
** CentOS の場合
** Ubuntu
** Debian




詳細については、次を参照してください。

* link:../vmware/index.html["VMware をインストールする"]
* link:../rhel/index.html["Red Hat Enterprise Linux または CentOS をインストールします"]
* link:../ubuntu/index.html["Ubuntu または Debian をインストールします"]


を使用します https://imt.netapp.com/matrix/#welcome["ネットアップの Interoperability Matrix Tool （ IMT ）"^] をクリックすると、サポートされるバージョンのリストが表示されます。



=== StorageGRID アプライアンスノード

StorageGRID ハードウェアアプライアンスは、 StorageGRID システム専用に設計されています。一部のアプライアンスはストレージノードとして使用できます。その他のアプライアンスは、管理ノードまたはゲートウェイノードとして使用できます。アプライアンスノードをソフトウェアベースのノードと組み合わせることができます。あるいは、外部のハイパーバイザー、ストレージ、コンピューティングハードウェアに依存しない、専用のアプライアンスのみで構成されたグリッドを導入することもできます。

次のタイプのStorageGRID アプライアンスを使用できます。

* SGF6112ストレージアプライアンス*は、コンピューティングコントローラとストレージコントローラを統合したNVMe（Non-Volatile Memory Express）SSDドライブ12本を搭載したオールフラッシュの1ラックユニット（1U）サーバです。
* SG100 および SG1000 サービスアプライアンス * は、それぞれプライマリ管理ノード、非プライマリ管理ノード、またはゲートウェイノードとして機能する 1 ラックユニット（ 1U ）サーバです。両方のアプライアンスをゲートウェイノードと管理ノード（プライマリノードと非プライマリノード）として同時に動作させることができます。
* SG6000 ストレージアプライアンス * は、 1U SG6000-CN コンピューティングコントローラと 2U または 4U ストレージコントローラシェルフを組み合わせたストレージノードとして機能します。SG6000 には次の 2 つのモデルがあります。
+
** * SGF6024 * ： SG6000-CN コンピューティングコントローラと、 24 本のソリッドステートドライブ（ SSD ）と冗長ストレージコントローラを搭載した 2U ストレージコントローラシェルフを組み合わせたものです。
** * SG6060 * ： SG6000-CN コンピューティングコントローラを、 58 本の NL-SAS ドライブ、 2 本の SSD 、冗長ストレージコントローラを搭載した 4U エンクロージャと組み合わせます。各 SG6060 アプライアンスは、 1 台または 2 台の 60 ドライブ拡張シェルフをサポートし、オブジェクトストレージ専用のドライブを最大で 178 本提供します。


* SG5700 ストレージアプライアンス * は、ストレージとコンピューティングを統合したプラットフォームであり、ストレージノードとして機能します。SG5700 には次の 2 つのモデルがあります。
+
** * SG5712 * ： NL-SAS ドライブ 12 本と統合ストレージ / コンピューティングコントローラを搭載した 2U エンクロージャ。
** * SG5760 * ： 60 本の NL-SAS ドライブと統合されたストレージ / コンピューティングコントローラを搭載した 4U エンクロージャ。




詳細については、次を参照してください。

* https://hwu.netapp.com["NetApp Hardware Universe の略"^]
* link:../installconfig/hardware-description-sg6100.html["SGF6112ストレージアプライアンス"]
* link:../installconfig/hardware-description-sg100-and-1000.html["SG100 および SG1000 サービスアプライアンス"]
* link:../installconfig/hardware-description-sg6000.html["SG6000 ストレージアプライアンス"]
* link:../installconfig/hardware-description-sg5700.html["SG5700 ストレージアプライアンス"]




=== 管理ノードのプライマリサービス

次の表に、管理ノードのプライマリサービスを示します。ただし、この表にはすべてのノードサービスが表示されるわけではありません。

[cols="1a,2a"]
|===
| サービス | キー機能 


 a| 
Audit Management System （ AMS ）
 a| 
システムアクティビティとイベントを追跡します。



 a| 
Configuration Management Node （ CMN ）
 a| 
システム全体の設定を管理します。プライマリ管理ノードのみ



 a| 
管理アプリケーションプログラミングインターフェイス（ mgmt-api ）
 a| 
グリッド管理 API とテナント管理 API からの要求を処理します。



 a| 
高可用性
 a| 
管理ノードとゲートウェイノードのグループのハイアベイラビリティ仮想 IP アドレスを管理します。

* 注： * このサービスはゲートウェイノードにも搭載されています。



 a| 
ロードバランサ
 a| 
クライアントからストレージノードへの S3 および Swift トラフィックのロードバランシングを実現します。

* 注： * このサービスはゲートウェイノードにも搭載されています。



 a| 
ネットワーク管理システム（ NMS ）
 a| 
Grid Manager の機能を提供します。



 a| 
Prometheus
 a| 
すべてのノードのサービスから時系列の指標を収集して格納します。



 a| 
SSM （サーバステータスモニタ）
 a| 
オペレーティングシステムと基盤のハードウェアを監視します。

|===


=== ストレージノードのプライマリサービス

次の表は、ストレージノードのプライマリサービスを示しています。ただし、この表にはすべてのノードサービスが含まれているわけではありません。


NOTE: ADC サービスや RSM サービスのように、通常は各サイトの 3 つのストレージノードにしか存在しないサービスもあります。

[cols="1a,2a"]
|===
| サービス | キー機能 


 a| 
アカウント（ acct ）
 a| 
テナントアカウントを管理します。



 a| 
Administrative Domain Controller （ ADC ；管理ドメインコントローラ）
 a| 
トポロジとグリッド全体の構成を管理します。



 a| 
Cassandra
 a| 
オブジェクトメタデータを格納し、保護します。



 a| 
Cassandra Reaper
 a| 
オブジェクトメタデータの自動修復を実行します。



 a| 
チャンク
 a| 
イレイジャーコーディングされたデータフラグメントとパリティフラグメントを管理します。



 a| 
Data Mover （ DMV ）
 a| 
クラウドストレージプールにデータを移動します。



 a| 
Distributed Data Store （ DDS ）
 a| 
オブジェクトメタデータストレージを監視します。



 a| 
ID （ idnt ）
 a| 
LDAP および Active Directory から取得したユーザ ID を統合する



 a| 
Local Distribution Router （ LDR ）（ローカル分散ルータ（ LDR ）
 a| 
オブジェクトストレージプロトコル要求を処理し、ディスク上のオブジェクトデータを管理します。



 a| 
Replicated State Machine （ RSM ）
 a| 
S3プラットフォームサービス要求がそれぞれのエンドポイントに送信されるようにします。



 a| 
SSM （サーバステータスモニタ）
 a| 
オペレーティングシステムと基盤のハードウェアを監視します。

|===


=== ゲートウェイノードのプライマリサービス

次の表に、ゲートウェイノードのプライマリサービスを示します。ただし、この表にはすべてのノードサービスが表示されるわけではありません。

[cols="1a,2a"]
|===
| サービス | キー機能 


 a| 
高可用性
 a| 
管理ノードとゲートウェイノードのグループのハイアベイラビリティ仮想 IP アドレスを管理します。

* 注： * このサービスは管理ノードにも搭載されています。



 a| 
ロードバランサ
 a| 
クライアントからストレージノードへの S3 および Swift トラフィックのレイヤ 7 のロードバランシングを実現します。これは推奨されるロードバランシングメカニズムです。

* 注： * このサービスは管理ノードにも搭載されています。



 a| 
SSM （サーバステータスモニタ）
 a| 
オペレーティングシステムと基盤のハードウェアを監視します。

|===


=== アーカイブノードのプライマリサービス

次の表に、アーカイブノード（現在は廃止）のプライマリサービスを示しますが、この表にすべてのノードサービスが記載されているわけではありません。


NOTE: アーカイブノードのサポートは廃止され、今後のリリースで削除される予定です。

[cols="1a,2a"]
|===
| サービス | キー機能 


 a| 
アーカイブ（ ARC ）
 a| 
Tivoli Storage Manager （ TSM ）外部テープストレージシステムと通信します。



 a| 
SSM （サーバステータスモニタ）
 a| 
オペレーティングシステムと基盤のハードウェアを監視します。

|===


=== StorageGRID サービス

StorageGRID サービスの一覧を以下に示します。

* * アカウントサービスフォワーダ *
+
ロードバランササービスがリモートホスト上のアカウントサービスを照会するためのインターフェイスを提供し、ロードバランサエンドポイントの設定変更をロードバランササービスに通知します。ロードバランササービスは管理ノードとゲートウェイノードにあります。

* * ADC サービス（ Administrative Domain Controller ） *
+
トポロジ情報を管理し、認証サービスを提供するとともに、 LDR サービスおよび CMN サービスから送られるクエリに応答します。ADC サービスは、サイトにインストールされた最初の 3 つのストレージノードのそれぞれに存在します。

* * AMS サービス ( 監査管理システム )*
+
監査対象のすべてのシステムイベントとトランザクションを監視し、テキストログファイルに記録します。AMS サービスは管理ノードにあります。

* * ARC サービス（アーカイブ） *
+
S3 インターフェイス経由のクラウドや TSM ミドルウェア経由のテープなど、外部アーカイブストレージへの接続を設定するための管理インターフェイスを提供します。ARC サービスはアーカイブノードにあります。

* * Cassandra Reaper サービス *
+
オブジェクトメタデータの自動修復を実行します。Cassandra Reaper サービスはすべてのストレージノードにあります。

* * チャンクサービス *
+
イレイジャーコーディングされたデータフラグメントとパリティフラグメントを管理します。チャンクサービスはストレージノードにあります。

* * CMN サービス（ Configuration Management Node ） *
+
システム全体の設定とグリッドタスクを管理します。各グリッドには 1 つの CMN サービスが用意されています。このサービスはプライマリ管理ノードにあります。

* * DDS サービス ( 分散データストア )*
+
Cassandra データベースとのインターフェイスを提供してオブジェクトメタデータを管理します。DDS サービスはストレージノードにあります。

* * DMV サービス（ Data Mover ） *
+
データをクラウドエンドポイントに移動します。DMV サービスはストレージノードにあります。

* * ダイナミック IP サービス *
+
IP の動的な変更がないかグリッドを監視し、ローカル設定を更新します。動的 IP （ dynip ）サービスはすべてのノードにあります。

* * Grafana サービス *
+
Grid Manager に表示される指標に使用されます。Grafana サービスは管理ノードにあります。

* * 高可用性サービス *
+
High Availability Groups ページで構成されたノードのハイアベイラビリティ仮想 IP を管理します。ハイアベイラビリティサービスは管理ノードとゲートウェイノードにあります。このサービスはキープアライブサービスとも呼ばれます。

* * アイデンティティ (idnt) サービス *
+
LDAP および Active Directory から取得したユーザ ID を統合するID サービス（ idnt ）は各サイトの 3 つのストレージノードにあります。

* * Lambda 仲裁人サービス *
+
S3 Select SelectObjectContent 要求を管理します。

* * ロードバランササービス *
+
クライアントからストレージノードへの S3 および Swift トラフィックのロードバランシングを実現します。ロードバランサエンドポイントの設定ページで設定できます。ロードバランササービスは管理ノードとゲートウェイノードにあります。このサービスは nginx-gw サービスとも呼ばれます。

* * LDR サービス（ Local Distribution Router ） *
+
グリッド内のコンテンツの格納と転送を管理します。LDR サービスはストレージノードにあります。

* *MISCd Information Service Control Daemon サービス *
+
他のノード上のサービスの照会と管理、およびノードの環境設定の管理（他のノードで実行されているサービスの状態の照会など）を行うためのインターフェイスを提供します。MISCd サービスはすべてのノードにあります。

* * nginx サービス *
+
は、各種のグリッドサービス（ Prometheus や動的 IP など）が HTTPS API を介して他のノード上のサービスと通信できるようにするための、認証およびセキュアな通信のメカニズムとして機能します。nginx サービスはすべてのノードにあります。

* * nginx-gw サービス *
+
ロードバランササービスの電源を投入します。nginx-gw サービスは管理ノードとゲートウェイノードにあります。

* * NMS サービス（ネットワーク管理システム） *
+
Grid Manager を介して表示される監視、レポート、および設定のオプションを強化します。NMS サービスは管理ノードにあります。

* * 持続性サービス *
+
リブート後も維持する必要があるルートディスク上のファイルを管理します。永続化サービスはすべてのノードにあります。

* * Prometheus サービス *
+
すべてのノードのサービスから時系列の指標を収集します。Prometheus サービスは管理ノードにあります。

* * RSM サービス（ Replicated State Machine Service ） *
+
プラットフォームサービス要求がそれぞれのエンドポイントに送信されるようにします。RSM サービスは、 ADC サービスを使用するストレージノードにあります。

* * SSM サービス（ Server Status Monitor ） *
+
ハードウェアの状態を監視して NMS サービスに報告します。SSM サービスのインスタンスは、すべてのグリッドノードにあります。

* * トレースコレクタサービス *
+
トレース収集を実行し、テクニカルサポートが使用する情報を収集します。TRACE コレクタサービスはオープンソースの Jaeger ソフトウェアを使用し、管理ノードに存在します。


