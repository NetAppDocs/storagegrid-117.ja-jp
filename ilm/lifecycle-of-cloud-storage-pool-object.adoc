---
permalink: ilm/lifecycle-of-cloud-storage-pool-object.html 
sidebar: sidebar 
keywords: lifecycle of cloud storage pool object 
summary: クラウドストレージプールを実装する前に、クラウドストレージプールのタイプごとに格納されているオブジェクトのライフサイクルを確認してください。 
---
= クラウドストレージプールオブジェクトのライフサイクル
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
クラウドストレージプールを実装する前に、クラウドストレージプールのタイプごとに格納されているオブジェクトのライフサイクルを確認してください。

* <<S3 ：クラウドストレージプールオブジェクトのライフサイクル>>
* <<Azure ：クラウドストレージプールオブジェクトのライフサイクル>>




== S3 ：クラウドストレージプールオブジェクトのライフサイクル

次の図は、 S3 クラウドストレージプールに格納されているオブジェクトのライフサイクルステージを示しています。


NOTE: この図と説明にある「 Glacier 」は、 Glacier ストレージクラスと Glacier Deep Archive ストレージクラスの両方を意味します。ただし例外が 1 つあり、 Glacier Deep Archive ストレージクラスでは Expedited リストア階層はサポートされず、Bulk または Standard のみがサポートされます。


NOTE: Google Cloud Platform （ GCP ）では、 POST Restore 処理を実行しなくても、長期保存からのオブジェクトの読み出しがサポートされます。

image::../media/cloud_storage_pool_object_life_cycle.png[クラウドストレージプールオブジェクトのライフサイクル]

. * StorageGRID * に格納されているオブジェクト
+
ライフサイクルを開始するために、クライアントアプリケーションがオブジェクトを StorageGRID に格納します。

. * オブジェクトを S3 クラウドストレージプールに移動 *
+
** S3 クラウドストレージプールを配置場所として使用する ILM ルールにオブジェクトが一致した場合、 StorageGRID はクラウドストレージプールで指定された外部の S3 バケットにオブジェクトを移動します。
** オブジェクトが S3 クラウドストレージプールに移動されると、クライアントアプリケーションは、オブジェクトが Glacier ストレージに移行されていないかぎり、 StorageGRID から S3 GET Object 要求を使用してオブジェクトを読み出すことができます。


. * オブジェクトを Glacier に移行（読み出し不可の状態） *
+
** 必要に応じて、オブジェクトを Glacier ストレージに移行できます。たとえば外部の S3 バケットが、ライフサイクル設定を使用してオブジェクトを即座または数日後に Glacier ストレージに移行できます。
+

NOTE: オブジェクトを移行する場合は、外部の S3 バケット用のライフサイクル設定を作成する必要があります。また、 Glacier ストレージクラスを実装し、 S3 POST Object restore API をサポートするストレージ解決策 を使用する必要があります。

+

NOTE: Swiftクライアントによって取り込まれたオブジェクトにはクラウドストレージプールを使用しないでください。Swift では POST Object restore 要求がサポートされないため、 StorageGRID は S3 Glacier ストレージに移行された Swift オブジェクトを読み出せません。これらのオブジェクトを読み出す Swift GET object 要求は失敗します（ 403 Forbidden ）。

** 移行中、クライアントアプリケーションは S3 HEAD Object 要求を使用してオブジェクトのステータスを監視できます。


. * Glacier ストレージからオブジェクトをリストア *
+
オブジェクトが Glacier ストレージに移行されている場合、クライアントアプリケーションは S3 POST Object restore 要求を問題 で実行して、読み出し可能なコピーを S3 クラウドストレージプールにリストアできます。要求では、クラウドストレージプールでコピーを利用できる日数と、リストア処理に使用するデータアクセス階層（ Expedited 、 Standard 、 Bulk ）を指定します。読み出し可能なコピーの有効期限に達すると、コピーは自動的に読み出し不可能な状態に戻ります。

+

NOTE: StorageGRID 内のストレージノードにもオブジェクトのコピーが存在する場合、 POST Object restore 要求を実行して Glacier からオブジェクトをリストアする必要はありません。GET Object 要求を使用してローカルコピーを直接読み出すことができます。

. * オブジェクトが取得されました *
+
オブジェクトがリストアされると、クライアントアプリケーションは GET Object 要求を問題 で実行して、リストアされたオブジェクトを読み出すことができます。





== Azure ：クラウドストレージプールオブジェクトのライフサイクル

次の図は、 Azure クラウドストレージプールに格納されているオブジェクトのライフサイクルステージを示しています。

image::../media/cloud_storage_pool_object_life_cycle_azure.png[Azure クラウドストレージプールオブジェクトのライフサイクル]

. * StorageGRID * に格納されているオブジェクト
+
ライフサイクルを開始するために、クライアントアプリケーションがオブジェクトを StorageGRID に格納します。

. * オブジェクトを Azure クラウドストレージプールに移動 *
+
Azure クラウドストレージプールを配置場所として使用する ILM ルールにオブジェクトが一致した場合、 StorageGRID はクラウドストレージプールで指定された外部の Azure BLOB ストレージコンテナにオブジェクトを移動します

+

NOTE: Swiftクライアントによって取り込まれたオブジェクトにはクラウドストレージプールを使用しないでください。Swift では POST Object restore 要求がサポートされないため、 StorageGRID は Azure BLOB ストレージのアーカイブ層に移行された Swift オブジェクトを読み出せません。これらのオブジェクトを読み出す Swift GET object 要求は失敗します（ 403 Forbidden ）。

. * オブジェクトをアーカイブ層に移行（読み出し不可の状態） *
+
オブジェクトを Azure クラウドストレージプールに移動すると、 StorageGRID は自動的にオブジェクトを Azure BLOB ストレージのアーカイブ層に移行します。

. * アーカイブ層からオブジェクトを復元 *
+
オブジェクトがアーカイブ層に移行されている場合、クライアントアプリケーションは S3 POST Object restore 要求を問題 で実行して、読み出し可能なコピーを Azure クラウドストレージプールにリストアできます。

+
POST Object Restore を受け取った StorageGRID は、オブジェクトを一時的に Azure BLOB ストレージのクール層に移行します。POST Object restore 要求の有効期限に達すると、 StorageGRID はオブジェクトをアーカイブ層に戻します。

+

NOTE: StorageGRID 内のストレージノードにもオブジェクトのコピーが存在する場合、 POST Object restore 要求を実行してアーカイブアクセス階層からオブジェクトをリストアする必要はありません。GET Object 要求を使用してローカルコピーを直接読み出すことができます。

. * オブジェクトが取得されました *
+
オブジェクトが Azure クラウドストレージプールにリストアされると、クライアントアプリケーションは、リストアされたオブジェクトを読み出すための GET Object 要求を問題 に送信できます。



.関連情報
link:../s3/index.html["S3 REST APIを使用する"]
