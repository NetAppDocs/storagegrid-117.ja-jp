---
permalink: ilm/creating-proposed-ilm-policy.html 
sidebar: sidebar 
keywords: how to create ILM policy, proposed policy 
summary: ドラフトの ILM ポリシーを新規に作成できます。同じルールセットを使用する場合は、現在のアクティブポリシーをクローニングして作成できます。 
---
= ドラフトの ILM ポリシーを作成します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ドラフトの ILM ポリシーを新規に作成できます。同じルールセットを使用する場合は、現在のアクティブポリシーをクローニングして作成できます。

独自のポリシーを作成する前に、を確認してください link:creating-ilm-policy.html#default-ilm-policy["デフォルトのILMポリシー"] がストレージ要件を満たしていない。


NOTE: 状況に応じて link:enabling-s3-object-lock-globally.html["グローバルS3オブジェクトロック設定が有効になりました"]の場合は、ILMポリシーがS3オブジェクトロックが有効になっているバケットの要件に準拠していることを確認する必要があります。このセクションでは、S3オブジェクトロックを有効にする手順を実行します。

.作業を開始する前に
* を使用して Grid Manager にサインインします link:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* を使用することができます link:../admin/admin-group-permissions.html["必要なアクセス権限"]。
* これで完了です link:access-create-ilm-rule-wizard.html["ILMルールが作成されました"] S3オブジェクトロックが有効になっているかどうかに基づきます。


[role="tabbed-block"]
====
.S3オブジェクトロックが有効になっていません
--
* これで完了です link:what-ilm-rule-is.html["ILMルールを作成しました"] ドラフトポリシーに追加する。必要に応じて、ドラフトポリシーを保存して追加のルールを作成し、ドラフトポリシーを編集して新しいルールを追加できます。
* これで完了です link:creating-default-ilm-rule.html["デフォルトの ILM ルールが作成されました"] フィルタが含まれていません。


--
.S3オブジェクトロックが有効になりました
--
* 。 link:enabling-s3-object-lock-globally.html["グローバルS3オブジェクトロック設定はすでに有効になっています"] StorageGRID システムの場合。
* これで完了です link:what-ilm-rule-is.html["準拠ILMルールと非準拠ILMルールを作成しました"] ドラフトポリシーに追加する。必要に応じて、ドラフトポリシーを保存して追加のルールを作成し、ドラフトポリシーを編集して新しいルールを追加できます。
* これで完了です link:creating-default-ilm-rule.html["デフォルトの ILM ルールが作成されました"] 準拠しているポリシーである。


--
====
* 必要に応じて、次のビデオを視聴しました。 https://["ビデオ：StorageGRID 11.7の情報ライフサイクル管理ポリシー"^]
+
[link=https://netapp.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=0009ebe1-3665-4cdc-a101-afbd009a0466]
image::../media/video-screenshot-ilm-policies-117.png[ビデオ：StorageGRID 11.7の情報ライフサイクル管理ポリシー]



も参照してください link:creating-ilm-policy.html["ILMポリシーを作成します。Overview"]。

.このタスクについて
ドラフトの ILM ポリシーを作成する主な理由は次のとおりです。

* 新しいサイトを追加した場合、そのサイトにオブジェクトを配置するために新しい ILM ルールを使用する必要があります。
* サイトの運用を停止し、そのサイトを参照しているILMルールをすべて削除する必要があるとします。
* 新しいテナントには特別なデータ保護要件があります。
* クラウドストレージプールの使用を開始した。



IMPORTANT: システム提供のポリシーであるBaseline 2 Copiesポリシーは、テストシステムでのみ使用してください。StorageGRID 11.6以前の場合、このポリシーのデフォルトルールでは、すべてのサイトが含まれるAll Storage Nodesストレージプールを使用します。StorageGRID システムに複数のサイトがある場合は、 1 つのオブジェクトのコピーが同じサイトに 2 つ配置される可能性があります。

.手順
. 「 * ILM * > * Policies * 」を選択します。
+
グローバルなS3オブジェクトロック設定が有効になっている場合は、[ILM policies]ページに、どのILMルールが準拠しているかが示されます。

. ドラフトの ILM ポリシーを作成する方法を決定します。[+]


[role="tabbed-block"]
====
.最初から始めます
--
. ドラフトのILMポリシーがすでに存在する場合は、*ドラフトポリシー*>* Actions *>* Remove *を選択します。
+
既存のドラフトポリシーがある場合、新しいドラフトポリシーを作成することはできません。

. [ドラフトポリシーの作成]*>*[新しいポリシーの作成]*を選択します。


--
.最初にアクティブポリシーのルールを指定します
--
. ドラフトのILMポリシーがすでに存在する場合は、*ドラフトポリシー*>* Actions *>* Remove *を選択します。
+
ドラフトポリシーがすでに存在する場合、アクティブポリシーをクローニングすることはできません。

. [ドラフトポリシーの作成]*>*[アクティブポリシーのクローニング]*を選択します。


--
.既存のドラフトポリシーを編集します
. ドラフトポリシー*>* Actions *>* Edit *を選択します。


====
. [ドラフトポリシー名]*フィールドに、ドラフトポリシーの一意の名前を入力します。
. [変更の理由]*フィールドに、新しいドラフトポリシーを作成する理由を入力します。
. ポリシーにルールを追加するには、*[ルールの選択]*を選択します。ルール名を選択すると、そのルールの設定が表示されます。
+

NOTE: 定期的に、ルールのリストが自動的に更新され、追加または削除が反映されます。ルールを選択した後に削除すると、エラーメッセージが表示されます。

+
ポリシーをクローニングする場合は、次の手順を実行します。

+
** クローニングするポリシーで使用されているルールが選択されます。
** クローニングするポリシーで、デフォルトルールではないフィルタを使用していないルールが使用されている場合は、それらのルールを 1 つだけ残して、それを除くすべてのルールを削除するように求められます。
** デフォルトルールでフィルタを使用している場合は、新しいデフォルトルールを選択するように求められます。
** デフォルトルールが最後のルールでなかった場合は、新しいポリシーの末尾にルールを移動できます。




[role="tabbed-block"]
====
.S3オブジェクトロックが有効になっていません
--
. ドラフトポリシーのデフォルトルールを1つ選択します。新しいデフォルトルールを作成するには、*[ILM rules]ページ*を選択します image:../media/icon_nms_more_details.gif["詳細アイコン"]。
+
デフォルトルールは、ポリシー内の別のルールに一致しないオブジェクトを環境 します。デフォルトルールはフィルタを使用できず、常に最後に評価されます。

+

IMPORTANT: Make 2 Copiesルールをポリシーのデフォルトルールとして使用しないでください。Make 2 Copies ルールは、 1 つのストレージプールであるすべてのストレージノードを使用します。このプールにはすべてのサイトが含まれています。StorageGRID システムに複数のサイトがある場合は、 1 つのオブジェクトのコピーが同じサイトに 2 つ配置される可能性があります。



--
.S3オブジェクトロックが有効になりました
--
. ドラフトポリシーのデフォルトルールを1つ選択します。新しいデフォルトルールを作成するには、*[ILM rules]ページ*を選択します image:../media/icon_nms_more_details.gif["詳細アイコン"]。
+
ルールのリストには、準拠しており、フィルタを使用しないルールのみが含まれています。

+

IMPORTANT: Make 2 Copiesルールをポリシーのデフォルトルールとして使用しないでください。Make 2 Copies ルールは、 1 つのストレージプールであるすべてのストレージノードを使用します。このプールにはすべてのサイトが含まれています。このルールを使用すると、 1 つのオブジェクトの複数のコピーが同じサイトに配置される場合があります。

. 非準拠S3バケット内のオブジェクトに別の「デフォルト」ルールが必要な場合は、*[非準拠S3バケット用のフィルタなしのルールを含める]*を選択し、フィルタを使用しない非準拠ルールを1つ選択します。
+
たとえば、クラウドストレージプールを使用して、S3オブジェクトロックが有効になっていないバケットにオブジェクトを格納できます。

+

NOTE: フィルタを使用しない非準拠ルールは 1 つだけ選択できます。



も参照してください link:example-7-compliant-ilm-policy-for-s3-object-lock.html["例 7 ： S3 オブジェクトロックの準拠 ILM ポリシー"]。

--
====
. デフォルトルールの選択が完了したら、* Continue *を選択します。
. [Other rules]ステップで、ポリシーに追加する他のルールを選択します。これらのルールでは、少なくとも1つのフィルタ（テナントアカウント、バケット名、高度なフィルタ、最新でない参照時間）を使用します。次に、*[選択]*を選択します。
+
[ドラフトポリシーの作成]ウィンドウに、選択したルールが表示されます。デフォルトのルールは末尾にあり、その上に他のルールがあります。

+
S3オブジェクトロックが有効になっていて、非準拠の「デフォルト」ルールも選択した場合、そのルールはポリシー内の最後から2番目のルールとして追加されます。

+

NOTE: オブジェクトを無期限に保持しないルールがある場合は、警告が表示されます。このポリシーをアクティブ化するときは、デフォルトルールの配置手順が経過したときにStorageGRID でオブジェクトを削除することを確認する必要があります（バケットライフサイクルによってオブジェクトが長期間保持される場合を除く）。

. デフォルト以外のルールの行をドラッグして、これらのルールを評価する順序を決定します。
+
デフォルトのルールは移動できません。S3オブジェクトロックが有効になっている場合は、非準拠の「デフォルト」ルールを選択しても移動できません。

+

IMPORTANT: ILM ルールの順序が正しいことを確認してください。ポリシーをアクティブ化すると、新規および既存のオブジェクトがリスト内の順にルールによって評価されます。

. 必要に応じて、*[ルールの選択]*を選択してルールを追加または削除します。
. 完了したら、 * 保存 * を選択します。
. に進みます link:simulating-ilm-policy.html["ILM ポリシーをシミュレートします"]。ドラフトポリシーが想定どおりに機能するように、アクティブ化する前に必ずドラフトポリシーをシミュレートする必要があります。

