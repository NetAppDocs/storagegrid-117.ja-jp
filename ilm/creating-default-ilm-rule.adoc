---
permalink: ilm/creating-default-ilm-rule.html 
sidebar: sidebar 
keywords: create default ilm rule 
summary: ILM ポリシーを作成する前に、デフォルトルールを作成して、ポリシー内の別のルールに一致しないオブジェクトを配置する必要があります。デフォルトルールではフィルタを使用できません。すべてのテナント、すべてのバケット、およびすべてのオブジェクトバージョンに適用する必要があります。 
---
= デフォルトの ILM ルールを作成します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ポリシーを作成する前に、デフォルトルールを作成して、ポリシー内の別のルールに一致しないオブジェクトを配置する必要があります。デフォルトのルールではフィルタを使用できません。すべてのテナント、すべてのバケット、およびすべてのオブジェクトバージョンに適用する必要があります。

.作業を開始する前に
* を使用して Grid Manager にサインインします link:../admin/web-browser-requirements.html["サポートされている Web ブラウザ"]。
* 特定のアクセス権限が必要です。


.このタスクについて
デフォルトルールはILMポリシーで最後に評価されるルールであるため、フィルタは使用できません。デフォルトルールの配置手順は、ポリシー内の別のルールに一致しないオブジェクトに適用されます。

このポリシーの例では、最初のルールがtest-tenant-1に属するオブジェクトにのみ適用されます。デフォルトルールである最後のルールは、他のすべてのテナントアカウントに属する環境 オブジェクトです。

image::../media/ilm_policies_page_default_rule.png[ILM ポリシーページのデフォルトルール]

デフォルトルールを作成するときは、次の要件に注意してください。

* デフォルトのルールは、ポリシーの最後のルールとして自動的に配置されます。
* デフォルトのルールでは、基本フィルタまたは拡張フィルタは使用できません。
* デフォルトルールはすべてのオブジェクトバージョンに適用する必要があります。
* デフォルトのルールでレプリケートコピーを作成する必要があります。
+

IMPORTANT: イレイジャーコーディングコピーを作成するルールをポリシーのデフォルトルールとして使用しないでください。イレイジャーコーディングルールでは、高度なフィルタを使用して、小さなオブジェクトがイレイジャーコーディングされないようにします。

* 一般に、デフォルトルールではオブジェクトを無期限に保持する必要があります。
* S3 オブジェクトのグローバルロック設定を使用している（または有効にする）場合は、アクティブポリシーまたはドラフトポリシーのデフォルトルールが準拠している必要があります。


.手順
. [* ILM*>* Rules] を選択します。
. 「 * Create * 」を選択します。
+
Create ILM RuleウィザードのStep 1（Enter details）が表示されます。

. [ルール名]*フィールドにルールの一意の名前を入力します。
. 必要に応じて、ルールの短い概要 を * 概要 * フィールドに入力します。
. [Tenant accounts]*フィールドは空白のままにします。
+
デフォルトのルールをすべてのテナントアカウントに適用する必要があります。

. [Bucket name]ドロップダウンでは、[matches all]*のままにします。
+
デフォルトルールは、すべての S3 バケットと Swift コンテナに適用する必要があります。

. 「このルールは古いオブジェクトバージョンにのみ適用しますか（バージョン管理が有効なS3バケット内）？」という質問は、デフォルトの回答 * No *のままにします。
. 高度なフィルタは追加しないでください。
+
デフォルトのルールではフィルタを指定できません。

. 「 * 次へ * 」を選択します。
+
[Step 2（Define placements）]が表示されます。

. 参照時間（Reference time）で任意のオプションを選択します。
+
質問にデフォルトの回答 * No *を使用している場合は、「このルールを古いオブジェクトバージョンにのみ適用しますか？」と表示されます。 [Noncurrent Time]はプルダウンリストに含まれません。デフォルトのルールは、すべてのオブジェクトバージョンを適用する必要があります。

. デフォルトルールの配置手順を指定します。
+
** デフォルトルールではオブジェクトを無期限に保持する必要があります。デフォルトルールによってオブジェクトが無期限に保持されない場合、新しいポリシーをアクティブ化すると警告が表示されます。これが想定どおりの動作であることを確認する必要があります。
** デフォルトのルールでレプリケートコピーを作成する必要があります。
+

IMPORTANT: イレイジャーコーディングコピーを作成するルールをポリシーのデフォルトルールとして使用しないでください。小さいオブジェクトがイレイジャーコーディングされるのを防ぐために、イレイジャーコーディングルールで「* Object size（MB）greater than 0.2 *」という高度なフィルタを指定する必要があります。

** S3 オブジェクトのグローバルロック設定を使用している（または有効にする）場合は、デフォルトルールが準拠している必要があります。
+
*** 2 つ以上のレプリケートオブジェクトコピーまたは 1 つのイレイジャーコーディングコピーを作成する。
*** これらのコピーが、配置手順の各ラインの間、ストレージノード上に存在している必要があります。
*** オブジェクトコピーをクラウドストレージプールに保存することはできません。
*** オブジェクトコピーをアーカイブノードに保存することはできません。
*** 配置手順の少なくとも1行は、取り込み時間を参照時間として使用し、0日目から開始する必要があります。
*** 配置手順の少なくとも 1 行は「無期限」である必要があります。




. [Retention]の図を参照して配置手順を確認します。
. 「 * Continue * 」を選択します。
+
手順3（取り込み動作を選択）が表示されます。

. 使用する取り込みオプションを選択し、*[作成]*を選択します。

